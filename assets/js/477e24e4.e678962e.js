(self.webpackChunk_ithil_protocol_docs=self.webpackChunk_ithil_protocol_docs||[]).push([[122],{7301:function(e,a,t){"use strict";t.r(a),t.d(a,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return c},default:function(){return k}});var n=t(7462),r=t(3366),s=(t(7294),t(3905)),o=t(3456),m=["components"],i={sidebar_position:3},l="Borrowing",p={unversionedId:"protocol-overview/borrowing",id:"protocol-overview/borrowing",title:"Borrowing",description:"Multiplying the capital to run a strategy by borrowing",source:"@site/docs/protocol-overview/borrowing.md",sourceDirName:"protocol-overview",slug:"/protocol-overview/borrowing",permalink:"/docs/protocol-overview/borrowing",editUrl:"https://github.com/ithil-protocol/docs/docs/protocol-overview/borrowing.md",tags:[],version:"current",lastUpdatedAt:1657638698,formattedLastUpdatedAt:"7/12/2022",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Lending",permalink:"/docs/protocol-overview/lending"},next:{title:"Strategies",permalink:"/docs/protocol-overview/strategies"}},c=[{value:"Take Loan",id:"take-loan",children:[],level:2},{value:"Repay",id:"repay",children:[],level:2}],h={toc:c};function k(e){var a=e.components,t=(0,r.Z)(e,m);return(0,s.kt)("wrapper",(0,n.Z)({},h,t,{components:a,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"borrowing"},"Borrowing"),(0,s.kt)("p",null,"Multiplying the capital to run a strategy by borrowing"),(0,s.kt)("hr",null),(0,s.kt)("p",null,"With Ithil, anyone can profit from a wide variety of DeFi market scenarios by performing leveraged investments; the seamless workflow allows the trader to enter into any investment strategy with few clicks, letting Ithil deal with all the complex procedures necessary to implement a particular strategy.\nA ",(0,s.kt)("em",{parentName:"p"},"true")," leverage is made possible by an internal system of uncollateralised loans, in which the funds are borrowed from Ithil's liquidity vault to be invested and the result of the particular investment is ",(0,s.kt)("em",{parentName:"p"},"locked")," in the strategy contract.\nIn order for a user to be able to perform a leveraged investment via a selected strategy, there must be some ",(0,s.kt)("em",{parentName:"p"},"margin")," posted into the strategy smart contract; this is necessary to cover for potential losses the vault could incur in the case of an unfavorable market movement."),(0,s.kt)("h2",{id:"take-loan"},"Take Loan"),(0,s.kt)("p",null,"The opening of a position is done in three steps:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"The user posts some margin into the strategy and sets the desired investment parameters"),(0,s.kt)("li",{parentName:"ul"},"The strategy borrows funds from the vault, if the desired amount to be invested is higher than the margin posted"),(0,s.kt)("li",{parentName:"ul"},"The strategy performs all the internal and external calls to invest (eventually borrowed) assets on other DeFi protocols while resulting LP tokens stay locked within the strategy itself.")),(0,s.kt)("p",null,"Since the amount invested might be higher than the user's initial capital, the investment can be ",(0,s.kt)("em",{parentName:"p"},"leveraged"),": in this way, the assets obtained will have a much higher value than if the user directly buys them from an external protocol."),(0,s.kt)(o.Mermaid,{config:{},chart:"graph TD\n    A[User] --\x3e|Add margin| B{Is amount > margin?}\n    B --\x3e|Yes| C(Take a loan<br> from the Vault)\n    C --\x3e D(Invest)\n    B --\x3e|No| D[Strategy]\n    D --\x3e E(Invest)",mdxType:"Mermaid"}),(0,s.kt)("h2",{id:"repay"},"Repay"),(0,s.kt)("p",null,"The closure of a position is likewise done in three steps:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"The assets are exchanged internally or through an external DeFi protocol, to obtain the initial token used for the investment"),(0,s.kt)("li",{parentName:"ul"},"The strategy repays the loan taken from the vault, plus interest rates and fees"),(0,s.kt)("li",{parentName:"ul"},"The remaining part of the payoff is given back to the trader.")),(0,s.kt)(o.Mermaid,{chart:"graph TD\n    A[User] --\x3e|Close position| B{Is PnL > margin?}\n    B --\x3e|Yes| C(Take profit)\n    B --\x3e|No| D(Incur loss)",mdxType:"Mermaid"}),(0,s.kt)("p",null,"A side note, the ",(0,s.kt)("em",{parentName:"p"},"profit and loss")," or PnL is computed as follows "),(0,s.kt)("div",{className:"math math-display"},(0,s.kt)("span",{parentName:"div",className:"katex-display"},(0,s.kt)("span",{parentName:"span",className:"katex"},(0,s.kt)("span",{parentName:"span",className:"katex-mathml"},(0,s.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},(0,s.kt)("semantics",{parentName:"math"},(0,s.kt)("mrow",{parentName:"semantics"},(0,s.kt)("mi",{parentName:"mrow"},"P"),(0,s.kt)("mi",{parentName:"mrow"},"n"),(0,s.kt)("mi",{parentName:"mrow"},"L"),(0,s.kt)("mo",{parentName:"mrow"},"="),(0,s.kt)("mi",{parentName:"mrow"},"a"),(0,s.kt)("mi",{parentName:"mrow"},"m"),(0,s.kt)("mi",{parentName:"mrow"},"o"),(0,s.kt)("mi",{parentName:"mrow"},"u"),(0,s.kt)("mi",{parentName:"mrow"},"n"),(0,s.kt)("mi",{parentName:"mrow"},"t"),(0,s.kt)("mo",{parentName:"mrow"},"\u2212"),(0,s.kt)("mi",{parentName:"mrow"},"l"),(0,s.kt)("mi",{parentName:"mrow"},"o"),(0,s.kt)("mi",{parentName:"mrow"},"a"),(0,s.kt)("mi",{parentName:"mrow"},"n"),(0,s.kt)("mo",{parentName:"mrow"},"\u2212"),(0,s.kt)("mi",{parentName:"mrow"},"f"),(0,s.kt)("mi",{parentName:"mrow"},"e"),(0,s.kt)("mi",{parentName:"mrow"},"e"),(0,s.kt)("mi",{parentName:"mrow"},"s")),(0,s.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"PnL = amount - loan - fees")))),(0,s.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6833em"}}),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"L"),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}}),(0,s.kt)("span",{parentName:"span",className:"mrel"},"="),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2778em"}})),(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.6984em",verticalAlign:"-0.0833em"}}),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"am"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"o"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"u"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"n"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"t"),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.7778em",verticalAlign:"-0.0833em"}}),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.01968em"}},"l"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"o"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"an"),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}}),(0,s.kt)("span",{parentName:"span",className:"mbin"},"\u2212"),(0,s.kt)("span",{parentName:"span",className:"mspace",style:{marginRight:"0.2222em"}})),(0,s.kt)("span",{parentName:"span",className:"base"},(0,s.kt)("span",{parentName:"span",className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.10764em"}},"f"),(0,s.kt)("span",{parentName:"span",className:"mord mathnormal"},"ees")))))))}k.isMDXComponent=!0},1748:function(e,a,t){var n={"./locale":9234,"./locale.js":9234};function r(e){var a=s(e);return t(a)}function s(e){if(!t.o(n,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=1748}}]);