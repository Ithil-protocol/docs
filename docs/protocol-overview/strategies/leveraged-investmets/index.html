<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MBCVETP548"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MBCVETP548",{})</script><title data-react-helmet="true">leveraged-investmets Â· Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ithil.fi/docs/protocol-overview/strategies/leveraged-investmets"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="leveraged-investmets Â· Documentation"><meta data-react-helmet="true" name="description" content="Leveraged investments"><meta data-react-helmet="true" property="og:description" content="Leveraged investments"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ithil.fi/docs/protocol-overview/strategies/leveraged-investmets"><link data-react-helmet="true" rel="alternate" href="https://ithil.fi/docs/protocol-overview/strategies/leveraged-investmets" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://ithil.fi/docs/protocol-overview/strategies/leveraged-investmets" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.224b177a.css">
<link rel="preload" href="/assets/js/runtime~main.4150f8e0.js" as="script">
<link rel="preload" href="/assets/js/main.14b72059.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.png" alt="Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Ithil | Docs</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Guide</a><a class="navbar__item navbar__link" href="/tutorial">Tutorial</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ithil-protocol/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Contribute<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">ðŸŒœ</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">ðŸŒž</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Litepaper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">FAQ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/protocol-overview/how-it-works">Protocol Overview</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/protocol-overview/how-it-works">How it works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/protocol-overview/lending">Lending</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/protocol-overview/staking">Staking</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" tabindex="0" href="/docs/protocol-overview/strategies/leveraged-investmets">Strategies</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/protocol-overview/strategies/leveraged-investmets">leveraged-investmets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/protocol-overview/strategies/margin-trading">margin-trading</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>leveraged-investmets</h1></header><h2 class="anchor anchorWithStickyNavbar_mojV" id="leveraged-investments">Leveraged investments<a class="hash-link" href="#leveraged-investments" title="Direct link to heading">â€‹</a></h2><p>With Ithil, anyone can profit from a wide variety of DeFi market scenarios by performing leveraged investments; the seamless workflow allows the trader to enter into any investment strategy with few clicks, letting Ithil deal with all the complex procedures necessary to implement a particular strategy.
A <em>true</em> leverage is made possible by an internal system of uncollateralised loans, in which the funds are borrowed from Ithil&#x27;s liquidity vault to be invested and the result of the particular investment is <em>locked</em> in the strategy contract.
In order for a user to be able to perform a leveraged investment via a selected strategy, there must be some <em>margin</em> posted into the strategy smart contract; this is necessary to cover for potential losses the vault could incur in the case of an unfavorable market movement.</p><p><img alt="Borrowing process" src="/assets/images/borrow-process-c1e0b4532e5ab4c54a322c36c9a67d2d.png" width="2399" height="1135"></p><p>The opening of a position is done in three steps:</p><ul><li>The user posts some margin into the strategy and sets the desired investment parameters</li><li>The strategy borrows funds from the vault, if the desired investment is higher than the margin posted</li><li>The strategy performs all the internal and external calls to get <em>assets</em> which are then locked into the strategy itself.</li></ul><p>Since the amount invested might be higher than the user&#x27;s initial capital, the investment can be <em>leveraged</em>: in this way, the assets obtained will have a much higher value than if the user directly buys them from an external protocol.</p><p><img alt="Repayment process" src="/assets/images/repay-process-12cf996431993326bf552ba2602ceae4.png" width="2397" height="1155"></p><p>The closure of a position is likewise done in three steps:</p><ul><li>The assets are exchanged internally or through an external DeFi protocol, to obtain the initial token used for the investment</li><li>The strategy repays the loan taken from the vault, plus interest rates and fees</li><li>The remaining part of the payoff is given back to the trader.</li></ul><p>The strategies which can be implemented are in principle very general: Ithil&#x27;s community can implement a new strategy at any time and the governance can approve it to use the vault&#x27;s funds.</p><p><img alt="Strategy approval process" src="/assets/images/strategy-approval-process-713e46df9e458062a3994488faad4999.png" width="1137" height="374"></p><p>In order to prevent the governance to take faulty decisions which would put the protocol&#x27;s liquidity at risk, all strategies must inherit from a common <strong>base strategy</strong>, an <em>abstract</em> contract which implements the borrow and repay logic agnostically from the particular investment logic. Such measure has the double advantage of setting a precise standard to assure the vault&#x27;s liquidity is protected and to make the development of new strategies much simpler and faster.</p><p><img alt="Base strategy" src="/assets/images/strategies-8ef0ed5c35acf244113b6aa008337f9d.png" width="1394" height="720"></p><p>Besides calling the relevant external contracts to perform the particular investment, the specific strategies must also implement a <strong>quoter</strong>, a view function which gives at every time the value of the obtained assets with respect to the initial token used to obtain them. This is important for liquidations and for margins given in the asset token.</p><p>Since the liquidity transferred from the vault and locked in the form of assets in the strategies belongs to the LPs, every time a loan is taken the vault computes the <strong>interest rate</strong> at which the liquidity can be borrowed for that particular investment. The calculation of the interest rate takes into account the riskiness of the investment, the amount of liquidity taken and the amount of margin posted by the user.</p><p>We give here two examples of simple strategies, while ideally <strong>the strategies that can be implemented are potentially infinite and can vary in complexity and risk, covering pure DeFi to more structured TradFi-like ones</strong>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="margin-trading">Margin trading<a class="hash-link" href="#margin-trading" title="Direct link to heading">â€‹</a></h3><p>Margin trading is the simplest form of a strategy, in which the investment logic is exchanging one token for another one on an external exchange platform.</p><p><img alt="Margin trading strategy" src="/assets/images/margin-trading-d906f3b174b853f81a6a79144ae23dfd.png" width="3066" height="1236"></p><p>The strategy&#x27;s quoter will keep track of the exchange rate of Token A with respect to Token B. When the position is closed, Token B is exchanged to obtain back Token A: the quantity of Token A obtained will determine if the investment has been profitable or not.
Let us make a numerical example of a <strong>long position</strong>:</p><ul><li>A user posts a margin of 100 TKA to the Margin Trading Strategy (MTS) contract and decides to go <em>long</em> with a x10 leverage on TKB.</li><li>Assuming an exchange rate of 50 TKA/TKB, the MTS will then borrow 900 TKA from the vault, say at a daily interest rate of 0.1% and exchange 1000 TKA to obtain 20 TKB from an external protocol. This tokens are locked in the MTS and an onchain position is opened for the user.</li><li>If the user closes the position after 10 days, when the exchange rate has increased by 20% to 60 TKA/TKB, then exchanging 20 TKB back will provide 1200 TKA to the MTS. </li><li>The MTS will repay the 909 TKA to the vault (900 borrowed plus 1% interest) and deliver the remaining 291 TKA to the user. With a market movement of only 20%, the user has realised a whopping 191% gain thanks to the 10x leverage.</li></ul><p>In the case of a <strong>short position</strong> the situation is similar:</p><ul><li>A user posts a margin of 100 TKA to the MTS contract and decides to go <em>short</em> with a x10 leverage on TKB.</li><li>Assuming an exchange rate of 50 TKA/TKB, the MTS will then borrow 20 TKB from the vault, say at a daily interest rate of 0.1% and exchange them on an external protocol to obtain 1000 TKA. This tokens are locked in the MTS and an onchain position is opened for the user. At this point, 1100 TKA are locked in the MTS.</li><li>If the user closes the position after 10 days, when the exchange rate has decreased by 20% to 40 TKA/TKB, then only 808 TKA are necessary to obtain the 20.2 TKB back to repay the vault (20 borrowed plus 1% interest). </li><li>The remaining 292 TKA are delivered to the user. A market movement of only 20% has made the trader earn 192% thanks to the 10x leverage.</li></ul><p>In both cases, the user can post the margin either in TKA or TKB and the MTS will adjust the amount of the loan to take from the vault accordingly.
Of course, if the market moves unfavorably, the losses are equally aplified with respect of a non-leveraged trade. If the exchange falls below some critical level, the position will be liquidated.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="leveraged-staking">Leveraged staking<a class="hash-link" href="#leveraged-staking" title="Direct link to heading">â€‹</a></h3><p>Through the Leveraged Staking Strategy (LSS), the vault&#x27;s liquidity can be borrowed and staked on an external protocol to get a leveraged yield. If the yield obtained from the staking protocol is higher than the interest rate necessary to borrow the funds, the difference represents the gain of the user.</p><p><img alt="Leveraged staking strategy" src="/assets/images/leveraged-staking-877958a3b68c3f603f5a1d81ed146567.png" width="3066" height="1205"></p><p>Let us make a numerical example.</p><ul><li>A user posts a margin of 100 TKA to the LSS contract and decides to stake TKA on an external staking protocol SP with a 10x leverage.</li><li>The LSS contract will borrow 900 TKA from the vault and stake the 1000 TKA on SP, obtaining say 1000 lTKA, the wrapped tokens representing the stake.</li><li>Assume that, after one month, the rolling APR of SP hah been 60%, thus giving a monthly gain of 5%. Assume also that the monthly interest rate applied by Ithil&#x27;s vault has been 3%. </li><li>If the user closes its position, the 1000 lTKA will be redeemed on SP to obtain 1050 TKA, while the vault has to be repaied of 927 TKA (900 TKA borrowed, plus 3%). The remaining 123 TKA are given back to the user, who will see a 23% gain in one month using a staking protocol which has only given 5% of yield. This is possible thanks to the x10 leverage.</li></ul><p>In both cases, the user can post the margin either in TKA or lTKA and the MTS will adjust the amount of the loan to take from the vault accordingly.
Of course, if the price per share increases less than the applied interest rate, the user may lose money. If the interest accrued go above some critical level, the position will be liquidated.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ithil-protocol/docs/docs/protocol-overview/strategies/leveraged-investmets.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-02-25T16:47:44.000Z">2/25/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/protocol-overview/staking"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Staking</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/protocol-overview/strategies/margin-trading"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">margin-trading</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#leveraged-investments" class="table-of-contents__link toc-highlight">Leveraged investments</a><ul><li><a href="#margin-trading" class="table-of-contents__link toc-highlight">Margin trading</a></li><li><a href="#leveraged-staking" class="table-of-contents__link toc-highlight">Leveraged staking</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/tutorial">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://ithil.fi" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://app.ithil.fi" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>App<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://ithil.fi/disclamer" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Disclamer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://ithil.fi/tos" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms of Service<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/assets/js/runtime~main.4150f8e0.js"></script>
<script src="/assets/js/main.14b72059.js"></script>
</body>
</html>